---
layout: page
title:  "Node.js"
date:   2021-02-01 21:21:21 +0530
categories: 后端语言
---


# 什么是node

- Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境
- JavaScript 运行时
- 既不是语言，也不是框架，它是一个平台
- Node.js 中的 JavaScript
  - 没有 BOM、DOM
  - EcmaScript 基本的 JavaScript 语言部分
  - 在 Node 中为 JavaScript 提供了一些服务器级别的 API
    - 文件操作的能力
    - http 服务的能力
    ......
## 在node中运行javascript

- 使用命令 "node js文件" 便可让js代码在node中运行

# node中的模块式开发

- 使用 exports 或者 module.exports 对象进行成员导出，使用require导入其他模块

    - exports 和 module.exports 的用法是一样的,都是同一个exports对象,只是使用时的优先级不一样,module.exports的优先级要高于exports

## node中的核心模块

-  核心模块是由 Node 提供的一个个的具名的模块，它们都有自己特殊的名称标识，例如
    - fs 文件操作模块
    - http 网络服务构建模块
    - os 操作系统信息模块
    - path 路径处理模块
    - .......

## node中的fs文件操作模块

- 使用方法

    - var 变量名 = require("fs")
    - 文件操作模块的方法
        - 读取文件内容: fs.readFile("文件路径/文件名称","文件编码",callback)
        - 写入文件内容: fs.writeFile("文件路径/文件名称","要写入的数据",callback)
        .......

## node中的path路径操作模块

- 路径操作模块可以进行路径的拼接

    - 为什么要进行路径的拼接：不同操作系统的路径分隔符不统一

- 路径拼接语法：

    使用前要先导入path模块: var 变量名 = require("path")
    path.join("路径", "路径",......)

- 拼接路径时可使用 __dirname 来获取当前文件所在的绝对路径

## node中的第三方模块

- 什么是第三方模块

    - 别人写好的、具有特定功能的、我们能直接使用的模块即第三方模块，别名包

- 第三方模块的两种存在形式：

    - 第一种：以js文件的形式存在，提供实现项目具体功能的API接口
    - 第二种：以命令行工具的形式存在，辅助项目开发

- 获取第三方模块

    - 使用 npm install 包名或者第三方模块名 命令来下载第三方模块(npm是node本身自带的第三方模块管理工具)

- 第三方模块 nodemon

    - 一个命令行工具，用以辅助项目开发
    - 可以监控文件的保存操作，只要保存文件便可直接看到效果，不需要再次执行文件
    - 使用方法：nodemon 要执行的文件名

- 第三方模块 nrm

    - npm下载地址切换工具
    - 使用方法：
        - nrm ls 命令可查看所有的下载地址
        - nrm use 地址名 命令可以切换到你想要用的下载地址

- 第三方模块 Gulp

    - 是一个基于node平台开发的前端构建工具，将机械化操作编写成任务，想要执行机械化操作时执行一个命令任务就能自动执行了，用机械代替手工，提高开发效率
    - 功能：
        - 项目上线、HTML、CSS、JS文件压缩合并
        - 语法转换(es6、less.....)
        - 公共文件抽离
        - 修改文件浏览器自动刷新等
    - 使用:
        - 使用 npm install gulp 下载gulp库文件
        - 在项目根目录下建立gulpfile.js文件 (gulp强制要求)
        - 重构项目的文件结构src目录放置源代码文件 dist目录放置构建后文件
        - 在gulpfile.js文件中编写任务
        - 在命令工具中执行gulp任务
    - 方法：
        gulp.src() 获取任务要处理的文件
        gulp.dest() 输出文件
        gulp.task() 建立gulp任务
        gulp.watch() 监控文件的变化
    - 实例代码：
        ```
            const gulp = require("gulp");
            // 使用gulp.task()方法建立任务
            gulp.task("任务名称"，() => {
                // 获取要处理的文件
                gulp.src("要处理的文件路径")
                // 将处理后的文件输出到dist目录
                .pipe(gulp.dest("输出文件的路径"))
            })

            最后在命令行中执行 gulp 任务名 命令即可
        ```
    
# node中的模块加载机制

- 模块加载
    - require方法根据模块路径查找模块
- 模块查找规则
    - 如果时完整路径，直接引入模块
    - 如果模块文件后缀省略时，先找同名JS文件
    - 若没有则找同名文件夹，如果找到了同名文件夹，便会找文件夹中的index.js并执行
    - 若没有找到index.js就会去当前文夹中的package.js文件中查找main选项的入口文件并执行
    - 如果找指定的入口文件不存在或者没有指定入口文件就会报错（模块没有找到）


# template模板引擎

- 基本语法：
    - 标准语法：{{ 数据 }}
    - 原始语法：<%= 数据 %>
- 条件判断
    - 标准语法：
        - {{ if 条件 }} .... {{ /if }}
        - {{ if 条件1 }} .... {{ else if 条件2 }} .... {{ /if }}
    - 原始语法：
        - <% if ( 条件 ) { %> .... <% } %>
        - <% if (条件1) { %> .... <% } else if (条件2) { %> .... <% } %>
- 循环
    - 标准语法：{{ each 循环的数据 }} .... {{ /each }}
    - 原始语法：<% for () { %> .... <% } %> 

- 子模版
    - 使用子模版可以将网站公共部分抽离到单独的文件中
    - 标准语法：{{ include "模板路径" }}
    - 原始语法：<% include("模板路径") %>

- 模板继承
    {{ extend "主模板路径" }}
    {{ block "引入代码的匿名" }} 想要引入的代码 {{ /block }}

